# FreeMikvahCal Setup Guide

## Overview
This project now includes ESLint, Prettier, and EmailJS configured for both frontend and backend, and is ready for deployment on Render.

## What's New

### Frontend
- ✅ **ESLint** configured for TypeScript and React
- ✅ **Prettier** configured for consistent code formatting
- ✅ **EmailJS** installed and ready for email functionality
- ✅ TypeScript build errors fixed
- ✅ All dependencies updated and compatible

### Backend
- ✅ **ESLint** configured for Node.js
- ✅ **Prettier** configured for consistent code formatting
- ✅ Lint and format scripts added

### Deployment
- ✅ **Render.yaml** updated with proper build commands
- ✅ Uses npm with `--legacy-peer-deps` flag for React 19 compatibility

## Scripts

### Frontend (`/frontend`)

```bash
# Development
npm run dev              # Start Vite dev server

# Build
npm run build            # Type check and build for production
npm run preview          # Preview production build
npm run typecheck        # Run TypeScript type checking

# Code Quality
npm run lint             # Run ESLint
npm run lint:fix         # Run ESLint and auto-fix issues
npm run format           # Format code with Prettier
npm run format:check     # Check if code is formatted
```

### Backend (`/backend`)

```bash
# Development
npm run dev              # Start with nodemon (auto-reload)
npm start                # Start in production mode

# Testing
npm test                 # Run Jest tests with coverage

# Code Quality
npm run lint             # Run ESLint
npm run lint:fix         # Run ESLint and auto-fix issues
npm run format           # Format code with Prettier
npm run format:check     # Check if code is formatted
```

## EmailJS Setup

EmailJS is now installed in the frontend. To use it:

1. Sign up at [emailjs.com](https://www.emailjs.com/)
2. Create a service and email template
3. Update the credentials in your contact form component
4. Use the `@emailjs/browser` package to send emails

Example usage is already implemented in `/frontend/src/pages/about.page.tsx`.

## Development Workflow

1. **Before committing:**
   ```bash
   # Run in frontend directory
   npm run lint
   npm run format
   npm run build

   # Run in backend directory
   npm run lint
   npm run format
   ```

2. **Fix any linting or formatting issues:**
   ```bash
   npm run lint:fix
   npm run format
   ```

3. **Commit your changes**

## Deployment to Render

The project is configured to deploy automatically to Render:

1. Push to your GitHub repository
2. Render will:
   - Install frontend dependencies with npm
   - Build the frontend with Vite
   - Copy the built frontend to backend/public
   - Install backend dependencies
   - Start the backend server

The backend serves both the API and the frontend static files in production.

## Environment Variables

Make sure to set these in Render:
- `NODE_ENV=production`
- `MONGO_ATLAS_URI` (your MongoDB connection string)
- `SESSION_SECRET` (auto-generated by Render)
- `FRONTEND_URL` (your Render app URL)
- `PORT=10000`

## Technology Stack

### Frontend
- React 19
- TypeScript
- Vite
- Mantine UI
- FullCalendar
- EmailJS
- Zustand (state management)

### Backend
- Node.js
- Express
- MongoDB (Mongoose)
- Passport.js (authentication)
- Winston (logging)

## Troubleshooting

### Peer Dependency Issues
If you encounter peer dependency errors, use:
```bash
npm install --legacy-peer-deps
```

This is necessary due to React 19 which some packages don't yet fully support.

### Build Errors
1. Run `npm run typecheck` to identify TypeScript errors
2. Run `npm run lint` to identify code quality issues
3. Fix issues and rebuild

### EmailJS Not Working
1. Verify your EmailJS service ID, template ID, and public key
2. Check the browser console for errors
3. Ensure CORS is properly configured in your EmailJS dashboard

## Additional Resources

- [ESLint Documentation](https://eslint.org/docs/latest/)
- [Prettier Documentation](https://prettier.io/docs/en/)
- [EmailJS Documentation](https://www.emailjs.com/docs/)
- [Render Documentation](https://render.com/docs)
- [Mantine UI Documentation](https://mantine.dev/)
